<section class="w-full flex h-fit justify-center px-4">
    @if(authService.isLoggedIn$ | async){
        <div class="flex flex-col w-full max-w-5xl center backdrop-blur-sm p-4 md:p-5 gap-6">
            <!-- Profile Header -->
            <div class="flex flex-col md:flex-row w-full h-fit gap-4 md:gap-10 justify-center items-center">
                <div class="shrink-0">
                    <div class="w-40 h-40 md:w-60 md:h-60">
                        <img [src]="(authService.user$ | async)?.pfp || 'assets/art/DEFAULT_PFP.svg'" class="w-full h-full object-cover rounded-full border-2 border-[oklch(0.53_0.19_351.02)] shadow-sm bg-white">
                    </div>
                </div>
                <div class="flex-1 w-full md:w-auto flex items-center justify-center">
                    <h1 class="text-3xl md:text-5xl font-[Fixture] uppercase tracking-wide text-[oklch(0.27_0.02_267.98)] italic text-center md:text-left">
                        {{ (authService.user$ | async)?.display_name || 'USER' }}
                    </h1>
                </div>
            </div>

            <hr>

            <!-- Settings Section -->
            <div class="flex flex-col md:flex-row w-full h-fit gap-4 md:gap-10 justify-center items-start md:items-center">
                <div class="flex-1 w-full flex flex-col gap-3">
                    <div class="w-full h-fit flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-5">
                        <label class="font-[IndustryBaby] text-base md:text-xl md:w-65 whitespace-nowrap text-[oklch(0.27_0.02_267.98)]">DISPLAY NAME:</label>
                        <input [formControl]="displayName" class="font-[IndustryBaby] border-2 h-8 w-full hover:border-[oklch(0.53_0.19_351.02)] focus:outline-none">
                    </div>
                    <div class="w-full h-fit flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-5">
                        <label class="font-[IndustryBaby] text-base md:text-xl whitespace-nowrap text-[oklch(0.27_0.02_267.98)]">PROFILE PICTURE:</label>
                        <input type="file" (change)="onFileSelected($event)" accept="image/*" class="font-[IndustryBaby] border-2 h-8 w-full hover:cursor-pointer transition-all ease-in-out hover:text-[oklch(0.53_0.19_351.02)]">
                    </div>
                </div>
                <div class="w-full sm:w-auto flex justify-center sm:justify-start">
                    <button [disabled]="!displayName.value && !selectedFile || isLoading" (click)='onSave()' class="font-[Fixture] bg-[oklch(0.53_0.19_351.02)] italic shadow-xl px-6 md:px-10 py-2 md:py-4 text-xl md:text-2xl text-[oklch(0.27_0.02_267.98)] transition-all ease-in-out hover:scale-105 hover:text-[oklch(0.53_0.19_351.02)] hover:bg-[oklch(0.27_0.02_267.98)] hover:cursor-pointer hover:shadow-2xl whitespace-nowrap">
                            {{ isLoading ? 'SAVING...' : 'SAVE' }}
                    </button>
                </div>
            </div>

            <hr>

            <!-- Stats Grid -->
            <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-4 w-full h-fit gap-4 md:gap-10 justify-center items-center">
                <div class="flex flex-col w-full h-full justify-center items-center gap-3">
                    <div class="italic text-xl md:text-2xl font-[Fixture] tracking-wider text-[oklch(0.27_0.02_267.98)]">
                        <h1>POINTS</h1>
                    </div>
                    <div class="text-2xl md:text-3xl font-[Fixture] tracking-wider text-[oklch(0.53_0.19_351.02)]">
                        <h1>
                            {{ (authService.user$ | async)?.pickem_points }}
                        </h1>
                    </div>
                </div>
                <div class="flex flex-col w-full h-full justify-center items-center gap-3">
                    <div class="italic text-xl md:text-2xl font-[Fixture] tracking-wider text-[oklch(0.27_0.02_267.98)]">
                        <h1>LOSSES</h1>
                    </div>
                    <div class="text-2xl md:text-3xl font-[Fixture] tracking-wider text-[oklch(0.53_0.19_351.02)]">
                        <h1>
                            {{ (authService.user$ | async)?.pickem_losses }}
                        </h1>
                    </div>
                </div>
                <div class="flex flex-col w-full h-full justify-center items-center gap-3">
                    <div class="italic text-xl md:text-2xl font-[Fixture] tracking-wider text-[oklch(0.27_0.02_267.98)]">
                        <h1>WINS</h1>
                    </div>
                    <div class="text-2xl md:text-3xl font-[Fixture] tracking-wider text-[oklch(0.53_0.19_351.02)]">
                        <h1>
                            {{ (authService.user$ | async)?.pickem_wins }}
                        </h1>
                    </div>
                </div>
                <div class="flex flex-col w-full h-full justify-center items-center gap-3">
                    <div class="italic text-xl md:text-2xl font-[Fixture] tracking-wider text-[oklch(0.27_0.02_267.98)]">
                        <h1>W/L %</h1>
                    </div>
                    <div class="text-2xl md:text-3xl font-[Fixture] tracking-wider text-[oklch(0.53_0.19_351.02)]">
                        <h1>
                            {{ (authService.user$ | async)?.win_percentage }}%
                        </h1>
                    </div>
                </div>
            </div>
        </div>
    }
    @else {
        <h1 class="font-[Fixture] text-4xl md:text-5xl text-center">
            HOW DID YOU GET HERE???
        </h1>
    }
    
</section>

